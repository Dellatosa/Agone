<form class="{{cssClass}}" autocomplete="off">
    <header class="sheet-header">
        {{> "systems/agone/templates/partials/bloc-infos-personnage.hbs"}}
    </header>
    <div class="sheet-fixed-content">
        <div class="actor-flamme">
            <div>
                <label>{{localize "agone.aspects.flamme"}}</label>
                <div class="small-size"><input name="data.caracSecondaires.flamme" type="number" value="{{data.caracSecondaires.flamme}}" placeholder="0" readonly/></div>
            </div>
            <div>
                <label>{{localize "agone.aspects.flammeNoire"}}</label>
                <div class="small-size"><input name="data.caracSecondaires.flammeNoire" type="number" value="{{data.caracSecondaires.flammeNoire}}" placeholder="0" readonly/></div>
            </div>
            <div>
                <label>{{localize "agone.caracteristiques.heroisme"}}</label>
                <div class="small-size"><input name="data.caracSecondaires.heroisme.value" type="number" value="{{data.caracSecondaires.heroisme.value}}" placeholder="0"/></div>
                <label> / </label>
                <div class="small-size"><input name="data.caracSecondaires.heroisme.max" type="number" value="{{data.caracSecondaires.heroisme.max}}" placeholder="0" readonly/></div>
            </div>
        </div>
        <div class="actor-aspects-and-caracs">    
            {{> "systems/agone/templates/partials/bloc-aspect-personnage.hbs"}}
        </div>
    </div>
    <nav class="sheet-tabs tabs" data-group="principal">
        <a class="item" data-tab="competences">{{localize "agone.common.competences"}}</a>
        <a class="item" data-tab="caracSecondaires">{{localize "agone.common.caracsSecondaires"}}</a>
        <a class="item" data-tab="combat">{{localize "agone.common.combat"}}</a>
        <a class="item" data-tab="magie">{{localize "agone.common.magie"}}</a>
        <a class="item" data-tab="avantagesDefauts">{{localize "agone.common.avantagesDefauts"}}</a>
    </nav>
    <section class="sheet-body">
        <div class="tab" data-group="principal" data-tab="competences">
            <div class="actor-fam-comp">
                {{#each data.colonnes as |col|}}
                    <div class="actor-comp-grid">
                        {{#each ../data.familleCompetences as |famille keyFam|}} 
                            {{#if (eq famille.numcol col)}}
                                <label class="titre-fam">{{famille.label}}</label>
                            {{/if}}
                            {{#each famille.competences as |competence keyComp|}}
                                {{#if domaine}}
                                    {{#if (eq competence.numcol col)}}
                                        <label class="titre-comp">{{competence.label}}</label>
                                    {{/if}}
                                    {{#each domaines as |domaine keyDom|}}
                                        {{#if (eq domaine.numcol col)}}
                                            {{#if domPerso}}
                                                <div class="dom-perso"><input name="data.familleCompetences.{{keyFam}}.competences.{{keyComp}}.domaines.{{keyDom}}.label" type="text" value="{{domaine.label}}" placeholder="{{localize 'agone.common.domaine'}}"/></div>
                                            {{else}}
                                                <label class="dom-fixe">{{domaine.label}}</label>
                                            {{/if}}
                                            <div class="val-comp"><input name="data.familleCompetences.{{keyFam}}.competences.{{keyComp}}.domaines.{{keyDom}}.rang" type="number" value="{{domaine.rang}}" placeholder="0"/></div>
                                            <div class="chk-spe"><input name="data.familleCompetences.{{keyFam}}.competences.{{keyComp}}.domaines.{{keyDom}}.specialisation" type="checkbox" data-dtype="Boolean" {{checked domaine.specialisation}}/></div>
                                            <i class="fas fa-dice rollable" data-rolltype="competence" data-roll="@familleCompetences.{{keyFam}}.competences.{{keyComp}}.domaines.{{keyDom}}.rang" data-carac="{{domaine.caracteristique}}" data-label="{{domaine.label}}" data-spe="{{domaine.specialisation}}" data-spelabel="{{domaine.labelSpecialisation}}"></i>
                                        {{/if}}      
                                    {{/each}}
                                {{else}}
                                    {{#if (eq competence.numcol col)}}
                                        <label class="lbl-comp">{{competence.label}}</label>     
                                        <div class="val-comp"><input name="data.familleCompetences.{{keyFam}}.competences.{{keyComp}}.rang" type="number" value="{{competence.rang}}" placeholder="0"/></div>
                                        <div class="chk-spe"><input name="data.familleCompetences.{{keyFam}}.competences.{{keyComp}}.specialisation" type="checkbox" data-dtype="Boolean" {{checked competence.specialisation}}/></div>
                                        <i class="fas fa-dice rollable" data-rolltype="competence" data-roll="@familleCompetences.{{keyFam}}.competences.{{keyComp}}.rang" data-carac="{{competence.caracteristique}}" data-label="{{competence.label}}" data-spe="{{competence.specialisation}}" data-spelabel="{{competence.labelSpecialisation}}"></i>
                                    {{/if}}    
                                {{/if}}
                            {{/each}}
                        {{/each}}
                    </div> 
                {{/each}}
            </div>
        </div>
        <div class="tab" data-group="principal" data-tab="caracSecondaires">
            {{> "systems/agone/templates/partials/bloc-caracSec-personnage.hbs"}}
        </div>
        <div class="tab" data-group="principal" data-tab="combat">
            <h2>TODO : combat</h2>
            <div class="liste-armes">
                {{#each armes as |arme id|}}
                {{> "systems/agone/templates/partials/bloc-listearmes-personnage.hbs" arme}}
                {{/each}}
            </div>
        </div>
        <div class="tab" data-group="principal" data-tab="magie">
            <h2>TODO : magie</h2>
        </div>
        <div class="tab" data-group="principal" data-tab="avantagesDefauts">
            <h2>TODO : avantagesDefauts</h2>
        </div>
    </section>
    <!-- <footer class="sheet-footer">    
    </footer> -->
</form>